<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Summarizing Data Part 1</title>
    <meta charset="utf-8" />
    <meta name="author" content="Jason Bryer, Ph.D.Â and Angela Lui, Ph.D." />
    <meta name="date" content="2023-09-06" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/mtheme_max.css" type="text/css" />
    <link rel="stylesheet" href="assets/fonts_mtheme_max.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: center, middle, inverse, title-slide

# Summarizing Data Part 1
## DATA 606 - Statistics &amp; Probability for Data Analytics
### Jason Bryer, Ph.D. and Angela Lui, Ph.D.
### September 6, 2023


---
# One Minute Paper Results



.pull-left[
**What was the most important thing you learned during this class?**
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;
]
.pull-right[
**What important question remains unanswered for you?**
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;
]


---
# Workflow

.center[
&lt;img src='images/data-science-wrangle.png' alt = 'Data Science Workflow' width='1000' /&gt;
]

.font80[Source: [Wickham &amp; Grolemund, 2017](https://r4ds.had.co.nz)]


---
# Tidy Data

.center[
&lt;img src='images/tidydata_1.jpg' height='500' /&gt;
]

See Wickham (2014) [Tidy data](https://vita.had.co.nz/papers/tidy-data.html).


---
# Types of Data

.pull-left[
* Numerical (quantitative)
	* Continuous
	* Discrete
]
.pull-right[
* Categorical (qualitative)
	* Regular categorical
	* Ordinal
]
.center[
&lt;img src='images/continuous_discrete.png' height='400' /&gt;
]

---
# Data Types in R

&lt;img src="images/DataTypesConceptModel.png" width="1000" style="display: block; margin: auto;" /&gt;

---
# Data Types / Descriptives / Visualizations


Data Type    |  Descriptive Stats                            | Visualization
-------------|-----------------------------------------------|-------------------|
Continuous   | mean, median, mode, standard deviation, IQR   | histogram, density, box plot
Discrete     | contingency table, proportional table, median | bar plot
Categorical  | contingency table, proportional table         | bar plot
Ordinal      | contingency table, proportional table, median | bar plot
Two quantitative | correlation                               | scatter plot
Two qualitative  | contingency table, chi-squared            | mosaic plot, bar plot
Quantitative &amp; Qualitative | grouped summaries, ANOVA, t-test | box plot

---
# Variance

.pull-left[
Population Variance:
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$
Consider a dataset with five values (black points in the figure). For the largest value, the deviance is represented by the blue line ( `\(x_i - \bar{x}\)` ).

See also:
https://shiny.rit.albany.edu/stat/visualizess/  
https://github.com/jbryer/VisualStats/

]
.pull-right[

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Variance (cont.)

.pull-left[
Population Variance:
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$
In the numerator, we square each of these deviances. We can conceptualize this as a square. Here, we add the deviance in the *y* direction.
]
.pull-right[
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Variance (cont.)

.pull-left[
Population Variance:
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$

We end up with a square.
]
.pull-right[
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Variance (cont.)

.pull-left[
Population Variance:
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$
We can plot the squared deviance for all the data points. That is, each component in the numerator is the area of each of these squares.
]
.pull-right[
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Variance (cont.)

.pull-left[
Population Variance:
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$
The variance is therefore the average of the area of all these squares, here represented by the orange square.
]
.pull-right[

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Population versus Sample Variance

.pull-left[
Typically we want the sample variance. The difference is we divide by `\(n - 1\)` to calculate the sample variance. This results in a slightly larger area (variance) then if we divide by `\(n\)`.

Population Variance (yellow):
$$ S^2 = \frac{\Sigma (x_i - \bar{x})^2}{N}$$

Sample Variance (green):
$$ s^2 = \frac{\Sigma (x_i - \bar{x})^2}{n-1}$$

]
.pull-right[

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;

]

---
# Robust Statistics

Consider the following data randomly selected from the normal distribution:

.pull-left[

```r
set.seed(41)
x &lt;- rnorm(30, mean = 100, sd = 15)
mean(x); sd(x)
```

```
## [1] 103.1934
```

```
## [1] 16.8945
```

```r
median(x); IQR(x)
```

```
## [1] 103.9947
```

```
## [1] 25.68004
```
]
.pull-right[
&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-12-1.png" style="display: block; margin: auto;" /&gt;
]

---
# Robust Statistics

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-13-1.png" style="display: block; margin: auto;" /&gt;

---
# Robust Statistics

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;

Let's add an extreme value:


```r
x &lt;- c(x, 1000)
```

--

&lt;img src="02-Summarizing_Data1_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;

---
# Robust Statistics

Median and IQR are more robust to skewness and outliers than mean and SD. Therefore,

* for skewed distributions it is often more helpful to use median and IQR to describe the center and spread

* for symmetric distributions it is often more helpful to use the mean and SD to describe the center and spread




---
class: font80
# About `legosets` &lt;img src="images/hex/brickset.png" class="title-hex"&gt;

To install the `brickset` package:


```r
remotes::install_github('jbryer/brickset')
```

To load the load the `legosets` dataset.


```r
data('legosets', package = 'brickset')
```

The `legosets` data has 18455 observations of 34 variables.

.code70[

```r
names(legosets)
```

```
##  [1] "setID"                 "name"                  "year"                 
##  [4] "theme"                 "themeGroup"            "subtheme"             
##  [7] "category"              "released"              "pieces"               
## [10] "minifigs"              "bricksetURL"           "rating"               
## [13] "reviewCount"           "packagingType"         "availability"         
## [16] "agerange_min"          "US_retailPrice"        "US_dateFirstAvailable"
## [19] "US_dateLastAvailable"  "UK_retailPrice"        "UK_dateFirstAvailable"
## [22] "UK_dateLastAvailable"  "CA_retailPrice"        "CA_dateFirstAvailable"
## [25] "CA_dateLastAvailable"  "DE_retailPrice"        "DE_dateFirstAvailable"
## [28] "DE_dateLastAvailable"  "height"                "width"                
## [31] "depth"                 "weight"                "thumbnailURL"         
## [34] "imageURL"
```
]

---
# Structure (`str`) &lt;img src="images/hex/brickset.png" class="title-hex"&gt;

.code50[


```r
str(legosets)
```

```
## 'data.frame':	18455 obs. of  34 variables:
##  $ setID                : int  7693 7695 7697 7698 25534 7418 7419 6020 22704 7421 ...
##  $ name                 : chr  "Small house set" "Medium house set" "Medium house set" "Large house set" ...
##  $ year                 : int  1970 1970 1970 1970 1970 1970 1970 1970 1970 1970 ...
##  $ theme                : chr  "Minitalia" "Minitalia" "Minitalia" "Minitalia" ...
##  $ themeGroup           : chr  "Vintage" "Vintage" "Vintage" "Vintage" ...
##  $ subtheme             : chr  NA NA NA NA ...
##  $ category             : chr  "Normal" "Normal" "Normal" "Normal" ...
##  $ released             : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...
##  $ pieces               : int  67 109 158 233 NA 1 1 60 65 NA ...
##  $ minifigs             : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ bricksetURL          : chr  "https://brickset.com/sets/1-8" "https://brickset.com/sets/2-8" "https://brickset.com/sets/3-6" "https://brickset.com/sets/4-4" ...
##  $ rating               : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ reviewCount          : int  0 0 1 0 0 0 0 0 0 0 ...
##  $ packagingType        : chr  "{Not specified}" "{Not specified}" "{Not specified}" "{Not specified}" ...
##  $ availability         : chr  "{Not specified}" "{Not specified}" "{Not specified}" "{Not specified}" ...
##  $ agerange_min         : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ US_retailPrice       : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ US_dateFirstAvailable: Date, format: NA NA ...
##  $ US_dateLastAvailable : Date, format: NA NA ...
##  $ UK_retailPrice       : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ UK_dateFirstAvailable: Date, format: NA NA ...
##  $ UK_dateLastAvailable : Date, format: NA NA ...
##  $ CA_retailPrice       : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ CA_dateFirstAvailable: Date, format: NA NA ...
##  $ CA_dateLastAvailable : Date, format: NA NA ...
##  $ DE_retailPrice       : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ DE_dateFirstAvailable: Date, format: NA NA ...
##  $ DE_dateLastAvailable : Date, format: NA NA ...
##  $ height               : num  NA NA NA NA NA ...
##  $ width                : num  NA NA NA NA NA ...
##  $ depth                : num  NA NA NA NA NA NA NA NA 5.08 NA ...
##  $ weight               : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ thumbnailURL         : chr  "https://images.brickset.com/sets/small/1-8.jpg" "https://images.brickset.com/sets/small/2-8.jpg" "https://images.brickset.com/sets/small/3-6.jpg" "https://images.brickset.com/sets/small/4-4.jpg" ...
##  $ imageURL             : chr  "https://images.brickset.com/sets/images/1-8.jpg" "https://images.brickset.com/sets/images/2-8.jpg" "https://images.brickset.com/sets/images/3-6.jpg" "https://images.brickset.com/sets/images/4-4.jpg" ...
```

]

---
# RStudio Eenvironment tab can help &lt;img src="images/hex/rstudio.png" class="title-hex"&gt;

&lt;img src="images/legosets_rstudio_environment.png" width="500" style="display: block; margin: auto;" /&gt;

---
class: hide-logo
# Table View 

.font60[

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3c190d22fc156aff4351" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3c190d22fc156aff4351">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[9839,29031,24652,1454,3116,28456,330,33684,30301,7220,24937,3965,30026,7589,10723,7714,24704,34046,2695,3585,30945,27019,31576,5631,7602,4427,7094,4227,1319,2890,572,7097,7071,8638,31939,26812,25580,24268,1670,33915,5318,1139,2064,29481,33629,1402,998,10029,31421,28299,30670,31634,4489,5262,4140,1467,24876,9692,31591,2474,9684,9150,189,701,30995,29383,6370,7411,32536,1094,7875,31418,28343,7949,3527,26520,7434,22570,30855,26034,29132,2901,27322,31365,2412,22423,3639,23591,29935,7665,31316,3555,23676,22405,31263,4798,4931,9195,27205,8262],["Anaheim Key Chain","Imperial Dropship  â 20th Anniversary Edition","LEGO Minifigures - Series 14 - Monsters - Complete","German Footballer","Building Plate, Green","Yorkshire Terrier","Treasure Cart","Mickey, Minnie and Goofy's Fairground Fun","Guarded Fortress","LEGO Travel Game","Adventure Time Level Pack","Friendship Frame / Mirror","80s Musician","LEGO Deluxe Brick Box","Bonus/Value Pack","Duplo Basic Bricks","Daisy's Beauty Salon","Allie Aires' Firefighter Jet","Buffers and Magnetic Couplings","Skateboard Challenge","Space Bundle 2 in 1","Beast","Tasmanian Devil","DUPLO Princesses Coloring Pack","Outpost Attack","Krekka","Airliner","Nitro Stunt Bike","Dressing Up","Flora's Bubbling Bath","Go-Kart","Kitchen Scale MF","City Placemat","Brick Bucket Small","Ninjago Anniversary Box","Rock Roader, Extra Awesome Edition","Tribal Woman","Turg","Ricky Racoon and his Scooter","Trash Trek Replacement Pack","Blue Renegade","Boy","Helicopter","Supernatural Race Car","Animal","Soft Ladybird and Bee","Play-Box Home and Garage","Vintage Minifigure Collection Vol. 2 (TRU edition)","Mechanical Pencil with mini figure","Coding Express","LEGO House Magnet","Disney Princess Enchanted Treasury","Dragster","PreSchool Set","Dune Duster","Intelligent Train Tunnel","Superman Minifigure Link Watch","F40","Fireman Bob","Remote Control for Signal 12V","Jet Pack","Spinner Battle Arena","Telekom Race Cyclist","Basic Building Set 3+","Parachute Goomba","Tree House","Space Hero Suit","Building Set ","4 Stud Desk Drawer Gray","DUPLO World People","Rose","Monica Geller","Pop-Up Book","Piano","Solo Trainer","Athletes minifigure collection","Book and Pencil","Basic Building Set","Christmas Ornament Reindeer","Sweepz","T. rex vs Dino-Mech Battle","The Royal Crystal Palace","Cities of Wonders - Singapore: Chilli Crab","Stygimoloch Dinosaur Escape","Duplo Farm Fences","Basic Building Set","Cosmic Comet","The LEGO Movie Nintendo 3DS Video Game","Animal Picture Holders","Water Gun","Bee Mario Power-Up Pack","Mobile Crane","Buildable Brick Box 2x2","Parrot's Perch","Adidas Graphic T Shirt","Duplo Dog","Duplo Primo","Fangdam","Giant Man Hank Pym","Fire Truck"],[2012,2019,2015,1998,1996,2018,1992,2022,2020,2009,2016,2004,2020,2010,2004,2010,2016,2022,1992,2002,2020,2017,2021,2006,2010,2004,2009,2003,1998,2002,1995,2009,2009,2002,2021,2016,2016,2015,1980,2015,2006,1997,2002,2020,2022,2001,1982,2012,2021,2018,2020,2020,1983,1975,1996,2002,2015,2012,2021,1989,2008,2012,2000,1992,2021,2019,2007,1970,2022,1991,2010,2021,2018,1973,1990,2016,2009,1985,2020,2016,2019,2002,2017,2021,1998,1987,1985,2014,2020,2010,2021,1978,2014,2013,2021,2005,1996,2012,2017,2011],["Gear","Star Wars","Collectable Minifigures","Town","Basic","Promotional","Castle","Disney","Super Mario","Gear","Dimensions","Clikits","Collectable Minifigures","Bricks and More","Bionicle","Duplo","Disney","City","Service Packs","Island Xtreme Stunts","City","BrickHeadz","Collectable Minifigures","Gear","Castle","Bionicle","Creator","Racers","Scala","Belville","Town","Gear","Gear","Explore","Gear","Ninjago","Collectable Minifigures","Mixels","Fabuland","Education","Racers","Basic","Basic","Hidden Side","Collectable Minifigures","Baby","Duplo","Promotional","Gear","Education","Gear","Books","Technic","PreSchool","Technic","Explore","Gear","Racers","City","Service Packs","Space","Ninjago","Town","Basic","Super Mario","Ideas","Gear","Duplo","Gear","Duplo","Promotional","Gear","Ideas","Homemaker","Town","Collectable Minifigures","Promotional","Basic","Seasonal","Mixels","Jurassic World","Belville","Promotional","Jurassic World","Service Packs","Basic","Space","Gear","Dots","Gear","Super Mario","Town","Miscellaneous","Friends","Gear","Duplo","Primo","Ninjago","Marvel Super Heroes","Duplo"],["Miscellaneous","Licensed","Miscellaneous","Modern day","Basic","Miscellaneous","Historical","Licensed","Licensed","Miscellaneous","Miscellaneous","Girls","Miscellaneous","Basic","Constraction","Pre-school","Licensed","Modern day","Miscellaneous","Racing","Modern day","Licensed","Miscellaneous","Miscellaneous","Historical","Constraction","Model making","Racing","Girls","Girls","Modern day","Miscellaneous","Miscellaneous","Pre-school","Miscellaneous","Action/Adventure","Miscellaneous","Miscellaneous","Junior","Educational","Racing","Basic","Basic","Action/Adventure","Miscellaneous","Pre-school","Pre-school","Miscellaneous","Miscellaneous","Educational","Miscellaneous","Miscellaneous","Technical","Pre-school","Technical","Pre-school","Miscellaneous","Racing","Modern day","Miscellaneous","Action/Adventure","Action/Adventure","Modern day","Basic","Licensed","Miscellaneous","Miscellaneous","Pre-school","Miscellaneous","Pre-school","Miscellaneous","Miscellaneous","Miscellaneous","Vintage","Modern day","Miscellaneous","Miscellaneous","Basic","Miscellaneous","Miscellaneous","Licensed","Girls","Miscellaneous","Licensed","Miscellaneous","Basic","Action/Adventure","Miscellaneous","Art and crafts","Miscellaneous","Licensed","Modern day","Miscellaneous","Modern day","Miscellaneous","Pre-school","Pre-school","Action/Adventure","Licensed","Pre-school"],["Gear","Normal","Collection","Normal","Normal","Other","Normal","Normal","Normal","Gear","Normal","Normal","Normal","Normal","Collection","Normal","Normal","Other","Normal","Normal","Collection","Normal","Normal","Gear","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Gear","Gear","Normal","Gear","Collection","Normal","Normal","Normal","Extended","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Extended","Gear","Normal","Gear","Book","Normal","Normal","Normal","Normal","Gear","Normal","Other","Normal","Normal","Normal","Normal","Normal","Normal","Normal","Gear","Normal","Gear","Normal","Other","Gear","Normal","Normal","Normal","Extended","Other","Normal","Extended","Normal","Normal","Normal","Other","Normal","Normal","Normal","Normal","Gear","Normal","Gear","Normal","Normal","Normal","Normal","Gear","Normal","Normal","Normal","Normal","Normal"],[null,19.99,null,null,4.99,null,null,34.99,49.99,24.99,29.99,null,null,49.99,null,null,9.99,null,null,null,null,9.99,null,null,19.99,null,null,null,null,null,null,null,null,null,null,null,null,4.99,null,null,null,null,null,29.99,null,null,null,null,null,239.95,null,null,null,null,null,null,24.99,null,null,null,null,39.99,null,null,null,249.99,24.99,null,13.99,null,null,5.99,69.98999999999999,null,null,null,null,null,7.99,4.99,89.98999999999999,null,null,39.99,null,null,null,null,14.99,9.99,9.99,null,16.99,4.99,null,null,null,9.99,null,null],[null,125,86,4,1,179,23,184,468,null,102,15,6,704,95,45,98,24,6,108,286,116,9,null,194,203,null,92,11,31,16,null,null,45,null,406,6,56,1,104,49,9,16,244,15,1,18,22,null,234,null,null,250,20,86,10,null,48,19,1,25,418,7,182,null,3036,null,20,null,12,25,null,859,131,74,20,null,211,34,61,716,149,null,129,4,68,40,null,423,null,13,55,203,32,null,32,17,20,3,21],[null,5,16,1,null,null,1,3,3,null,1,null,1,2,null,null,null,1,null,3,null,null,1,null,3,null,null,null,null,1,1,null,null,null,null,null,2,null,1,null,null,null,null,3,1,null,2,5,null,6,null,null,null,null,null,null,null,null,1,null,null,2,1,null,1,4,null,null,null,12,null,null,5,null,1,4,null,1,null,null,4,3,null,3,null,null,1,null,null,null,null,1,1,null,null,null,1,1,1,1],[0,4,4.3,0,4.1,0,3.5,0,3.8,0,4,0,3.7,3.9,0,0,3.4,0,0,4.2,0,3.9,4.4,0,3.8,4.1,0,0,0,0,0,0,0,0,0,0,4.2,3.8,0,0,4.3,0,0,3.7,4.3,0,0,0,0,0,0,0,0,0,3.4,0,0,3.5,0,0,0,3.4,3.4,0,3.8,4.5,0,0,0,0,0,0,4.2,0,4,0,0,0,3.8,3.7,4,0,0,3.6,0,0,4,0,3.6,0,0,0,0,3.4,0,0,0,3.5,3.5,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>setID<\/th>\n      <th>name<\/th>\n      <th>year<\/th>\n      <th>theme<\/th>\n      <th>themeGroup<\/th>\n      <th>category<\/th>\n      <th>US_retailPrice<\/th>\n      <th>pieces<\/th>\n      <th>minifigs<\/th>\n      <th>rating<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"className":"dt-right","targets":[1,3,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>

]


---
# Data Wrangling Cheat Sheet &lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.center[
&lt;a href='https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf' target='_new'&gt;&lt;img src='images/data-transformation.png' width='700' /&gt;&lt;/a&gt;
]


---
# Tidyverse vs Base R &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/pipe.png" class="title-hex"&gt;

.center[
&lt;a href='images/R_Syntax_Comparison.jpeg' target='_new'&gt;&lt;img src="images/R_Syntax_Comparison.jpeg" width='700' /&gt;&lt;/a&gt;
]


---
# Pipes `%&gt;%` and `|&gt;` &lt;img src="images/hex/magrittr.png" class="title-hex"&gt;

&lt;img src='images/magrittr_pipe.jpg' align='right' width='200' /&gt;

.font90[
The pipe operator (`%&gt;%`) introduced with the `magrittr` R package allows for the chaining of R operations. Base R has now added their own pipe operator (`|&gt;`). They take the output from the left-hand side and passes it as the first parameter to the function on the right-hand side.
]

.pull-left[
You can do this in two steps:


```r
tab_out &lt;- table(legosets$category)
prop.table(tab_out)
```

Or as nested function calls.


```r
prop.table(table(legosets$category))
```
]
.pull-right[
Using the pipe (`|&gt;`) operator we can chain these calls in a what is arguably a more readable format:


```r
table(legosets$category) |&gt; prop.table()
```
]

&lt;hr /&gt;


```
## 
##        Book  Collection    Extended        Gear      Normal       Other 
## 0.034191276 0.031319426 0.027147115 0.153345977 0.691248984 0.059279328 
##      Random 
## 0.003467895
```

---
# Filter &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.center[
&lt;img src='images/dplyr_filter_sm.png' width='800' /&gt;
]

---
# Logical Operators

* `!a` - TRUE if a is FALSE
* `a == b` - TRUE if a and be are equal
* `a != b` - TRUE if a and b are not equal
* `a &gt; b` - TRUE if a is larger than b, but not equal
* `a &gt;= b` - TRUE if a is larger or equal to b
* `a &lt; b` - TRUE if a is smaller than be, but not equal
* `a &lt;= b` - TRUE if a is smaller or equal to b
* `a %in% b` - TRUE if a is in b where b is a vector  

```r
which( letters %in% c('a','e','i','o','u') )
```

```
## [1]  1  5  9 15 21
```
* `a | b` - TRUE if a *or* b are TRUE
* `a &amp; b` - TRUE if a *and* b are TRUE
* `isTRUE(a)` - TRUE if a is TRUE

---
# Filter &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

### `dplyr`


```r
mylego &lt;- legosets %&gt;% filter(themeGroup == 'Educational' &amp; year &gt; 2015)
```

### Base R


```r
mylego &lt;- legosets[legosets$themeGroups == 'Educaitonal' &amp; legosets$year &gt; 2015,]
```

&lt;hr /&gt;


```r
nrow(mylego)
```

```
## [1] 92
```

---
# Select &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

### `dplyr`


```r
mylego &lt;- mylego %&gt;% select(setID, pieces, theme, availability, US_retailPrice, minifigs)
```

### Base R


```r
mylego &lt;- mylego[,c('setID', 'pieces', 'theme', 'availability', 'US_retailPrice', 'minifigs')]
```

&lt;hr /&gt;


```r
head(mylego, n = 4)
```

```
##   setID pieces     theme    availability US_retailPrice minifigs
## 1 26803    103 Education {Not specified}             NA        6
## 2 26689    142 Education {Not specified}             NA        4
## 3 26804     98 Education {Not specified}             NA        6
## 4 26277    188 Education     Educational          94.95       NA
```

---
# Relocate &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.center[
&lt;img src='images/dplyr_relocate.png' width='800' /&gt;
]

---
# Relocate &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

### `dplyr`


```r
mylego %&gt;% relocate(where(is.numeric), .after = where(is.character)) %&gt;% head(n = 3)
```

```
##       theme    availability setID pieces US_retailPrice minifigs
## 1 Education {Not specified} 26803    103             NA        6
## 2 Education {Not specified} 26689    142             NA        4
## 3 Education {Not specified} 26804     98             NA        6
```

### Base R


```r
mylego2 &lt;- mylego[,c('theme', 'availability', 'setID', 'pieces', 'US_retailPrice', 'minifigs')]
head(mylego2, n = 3)
```

```
##       theme    availability setID pieces US_retailPrice minifigs
## 1 Education {Not specified} 26803    103             NA        6
## 2 Education {Not specified} 26689    142             NA        4
## 3 Education {Not specified} 26804     98             NA        6
```


---
# Rename &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.center[
&lt;img src='images/rename_sm.jpg' width='1000' /&gt;
]

---
# Rename &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

### `dplyr`


```r
mylego %&gt;% dplyr::rename(USD = US_retailPrice) %&gt;% head(n = 3)
```

```
##   setID pieces     theme    availability USD minifigs
## 1 26803    103 Education {Not specified}  NA        6
## 2 26689    142 Education {Not specified}  NA        4
## 3 26804     98 Education {Not specified}  NA        6
```

### Base R


```r
names(mylego2)[5] &lt;- 'USD'
head(mylego2, n = 3)
```

```
##       theme    availability setID pieces USD minifigs
## 1 Education {Not specified} 26803    103  NA        6
## 2 Education {Not specified} 26689    142  NA        4
## 3 Education {Not specified} 26804     98  NA        6
```

---
# Mutate &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.center[
&lt;img src='images/dplyr_mutate.png' width='700' /&gt;
]

---
# Mutate &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

### `dplyr`


```r
mylego %&gt;% filter(!is.na(pieces) &amp; !is.na(US_retailPrice)) %&gt;% 
	mutate(Price_per_piece = US_retailPrice / pieces) %&gt;% head(n = 3)
```

```
##   setID pieces     theme availability US_retailPrice minifigs Price_per_piece
## 1 26277    188 Education  Educational          94.95       NA       0.5050532
## 2 25949    280 Education  Educational         224.95       NA       0.8033929
## 3 25954      1 Education  Educational          14.95       NA      14.9500000
```

### Base R


```r
mylego2 &lt;- mylego[!is.na(mylego$US_retailPrice) &amp; !is.na(mylego$Price_per_piece),]
mylego2$Price_per_piece &lt;- mylego2$Price_per_piece / mylego2$US_retailPrice
head(mylego2, n = 3)
```

```
## [1] setID           pieces          theme           availability   
## [5] US_retailPrice  minifigs        Price_per_piece
## &lt;0 rows&gt; (or 0-length row.names)
```


---
# Group By and Summarize &lt;img src="images/hex/tidyverse.png" class="title-hex"&gt;&lt;img src="images/hex/dplyr.png" class="title-hex"&gt;

.code80[

```r
legosets %&gt;% group_by(themeGroup) %&gt;% summarize(mean_price = mean(US_retailPrice, na.rm = TRUE),
												sd_price = sd(US_retailPrice, na.rm = TRUE),
												median_price = median(US_retailPrice, na.rm = TRUE),
												n = n(),
												missing = sum(is.na(US_retailPrice)))
```

```
## # A tibble: 16 Ã 6
##    themeGroup       mean_price sd_price median_price     n missing
##    &lt;chr&gt;                 &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;   &lt;int&gt;
##  1 Action/Adventure       38.3     35.6         30.0  1397     745
##  2 Art and crafts         33.2     46.6         15.0    84       8
##  3 Basic                  20.3     17.8         15.0   863     730
##  4 Constraction           16.4     12.4         13.0   502     284
##  5 Educational           172.     185.         119.    493     457
##  6 Girls                  35.8     24.0         23.0   240     227
##  7 Historical             34.2     32.4         20.0   473     400
##  8 Junior                 22.0     10.1         20.0   227     164
##  9 Licensed               51.8     70.0         30.0  2510     974
## 10 Miscellaneous          20.2     28.5         13.0  5890    3717
## 11 Model making           72.4     90.3         40.0   719     362
## 12 Modern day             37.0     34.9         30.0  2357    1503
## 13 Pre-school             30.2     22.0         25.0  1537    1098
## 14 Racing                 26.8     26.5         15.0   270     176
## 15 Technical              80.2     88.9         50.0   588     326
## 16 Vintage               NaN       NA           NA     305     305
```
]

---
# Describe and Describe By


```r
library(psych)
describe(legosets$US_retailPrice)
```

```
##    vars    n  mean    sd median trimmed   mad  min    max range skew kurtosis
## X1    1 6979 37.54 54.39  19.99    26.7 16.31 1.49 849.99 848.5 5.44       48
##      se
## X1 0.65
```




```r
describeBy(legosets$US_retailPrice, group = legosets$availability, mat = TRUE, skew = FALSE)
```

```
##      item                group1 vars    n       mean         sd   min    max range         se
## X11     1       {Not specified}    1 1928  26.546862  38.647760  1.49 789.99 788.5  0.8801786
## X12     2           Educational    1   12 208.700000 104.362241 14.95 399.95 385.0 30.1267839
## X13     3        LEGO exclusive    1  838  59.133043 108.593395  1.99 849.99 848.0  3.7512966
## X14     4    LEGOLAND exclusive    1    2   4.990000   0.000000  4.99   4.99   0.0  0.0000000
## X15     5              Not sold    1    1  12.990000         NA 12.99  12.99   0.0         NA
## X16     6           Promotional    1    6   5.156667   1.169045  3.99   6.99   3.0  0.4772607
## X17     7 Promotional (Airline)    1    0        NaN         NA   Inf   -Inf  -Inf         NA
## X18     8                Retail    1 3904  36.014985  36.226307  1.99 499.99 498.0  0.5797879
## X19     9      Retail - limited    1  287  63.154983  71.721888  2.49 449.99 447.5  4.2336092
## X110   10               Unknown    1    1   3.990000         NA  3.99   3.99   0.0         NA
```


---
# Additional Resources

For data wrangling:

* `dplyr` website: https://dplyr.tidyverse.org
* R for Data Science book: https://r4ds.had.co.nz/wrangle-intro.html
* Wrangling penguins tutorial: https://allisonhorst.shinyapps.io/dplyr-learnr/#section-welcome
* Data transformation cheat sheet: https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf


---
# One Minute Paper

Complete the one minute paper: https://forms.gle/ngYXfC6jwY3TV6FXA

1. What was the most important thing you learned during this class?

2. What important question remains unanswered for you?

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLanguage": "R",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<!-- Source: https://www.garrickadenbuie.com/blog/xaringan-tip-logo-all-slides/ -->
<style>
.logo {
  background-image: url(images/hex/DATA606.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  bottom: 2em;
  right: 0.5em;
  width: 55px;
  height: 64px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
